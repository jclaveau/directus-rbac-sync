import t from"fs";import e from"constants";import n from"stream";import r from"util";import i from"assert";import o from"path";var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var s={},u={fromCallback:function(t){return Object.defineProperty((function(...e){if("function"!=typeof e[e.length-1])return new Promise(((n,r)=>{t.call(this,...e,((t,e)=>null!=t?r(t):n(e)))}));t.apply(this,e)}),"name",{value:t.name})},fromPromise:function(t){return Object.defineProperty((function(...e){const n=e[e.length-1];if("function"!=typeof n)return t.apply(this,e);t.apply(this,e.slice(0,-1)).then((t=>n(null,t)),n)}),"name",{value:t.name})}},l=e,f=process.cwd,p=null,d=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return p||(p=f.call(process)),p};try{process.cwd()}catch(t){}if("function"==typeof process.chdir){var h=process.chdir;process.chdir=function(t){p=null,h.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,h)}var y=function(t){l.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(t){t.lchmod=function(e,n,r){t.open(e,l.O_WRONLY|l.O_SYMLINK,n,(function(e,i){e?r&&r(e):t.fchmod(i,n,(function(e){t.close(i,(function(t){r&&r(e||t)}))}))}))},t.lchmodSync=function(e,n){var r,i=t.openSync(e,l.O_WRONLY|l.O_SYMLINK,n),o=!0;try{r=t.fchmodSync(i,n),o=!1}finally{if(o)try{t.closeSync(i)}catch(t){}else t.closeSync(i)}return r}}(t);t.lutimes||function(t){l.hasOwnProperty("O_SYMLINK")&&t.futimes?(t.lutimes=function(e,n,r,i){t.open(e,l.O_SYMLINK,(function(e,o){e?i&&i(e):t.futimes(o,n,r,(function(e){t.close(o,(function(t){i&&i(e||t)}))}))}))},t.lutimesSync=function(e,n,r){var i,o=t.openSync(e,l.O_SYMLINK),a=!0;try{i=t.futimesSync(o,n,r),a=!1}finally{if(a)try{t.closeSync(o)}catch(t){}else t.closeSync(o)}return i}):t.futimes&&(t.lutimes=function(t,e,n,r){r&&process.nextTick(r)},t.lutimesSync=function(){})}(t);t.chown=r(t.chown),t.fchown=r(t.fchown),t.lchown=r(t.lchown),t.chmod=e(t.chmod),t.fchmod=e(t.fchmod),t.lchmod=e(t.lchmod),t.chownSync=i(t.chownSync),t.fchownSync=i(t.fchownSync),t.lchownSync=i(t.lchownSync),t.chmodSync=n(t.chmodSync),t.fchmodSync=n(t.fchmodSync),t.lchmodSync=n(t.lchmodSync),t.stat=o(t.stat),t.fstat=o(t.fstat),t.lstat=o(t.lstat),t.statSync=a(t.statSync),t.fstatSync=a(t.fstatSync),t.lstatSync=a(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(t,e,n){n&&process.nextTick(n)},t.lchmodSync=function(){});t.chown&&!t.lchown&&(t.lchown=function(t,e,n,r){r&&process.nextTick(r)},t.lchownSync=function(){});"win32"===d&&(t.rename="function"!=typeof t.rename?t.rename:function(e){function n(n,r,i){var o=Date.now(),a=0;e(n,r,(function c(s){if(s&&("EACCES"===s.code||"EPERM"===s.code)&&Date.now()-o<6e4)return setTimeout((function(){t.stat(r,(function(t,o){t&&"ENOENT"===t.code?e(n,r,c):i(s)}))}),a),void(a<100&&(a+=10));i&&i(s)}))}return Object.setPrototypeOf&&Object.setPrototypeOf(n,e),n}(t.rename));function e(e){return e?function(n,r,i){return e.call(t,n,r,(function(t){c(t)&&(t=null),i&&i.apply(this,arguments)}))}:e}function n(e){return e?function(n,r){try{return e.call(t,n,r)}catch(t){if(!c(t))throw t}}:e}function r(e){return e?function(n,r,i,o){return e.call(t,n,r,i,(function(t){c(t)&&(t=null),o&&o.apply(this,arguments)}))}:e}function i(e){return e?function(n,r,i){try{return e.call(t,n,r,i)}catch(t){if(!c(t))throw t}}:e}function o(e){return e?function(n,r,i){function o(t,e){e&&(e.uid<0&&(e.uid+=4294967296),e.gid<0&&(e.gid+=4294967296)),i&&i.apply(this,arguments)}return"function"==typeof r&&(i=r,r=null),r?e.call(t,n,r,o):e.call(t,n,o)}:e}function a(e){return e?function(n,r){var i=r?e.call(t,n,r):e.call(t,n);return i&&(i.uid<0&&(i.uid+=4294967296),i.gid<0&&(i.gid+=4294967296)),i}:e}function c(t){return!t||("ENOSYS"===t.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==t.code&&"EPERM"!==t.code))}t.read="function"!=typeof t.read?t.read:function(e){function n(n,r,i,o,a,c){var s;if(c&&"function"==typeof c){var u=0;s=function(l,f,p){if(l&&"EAGAIN"===l.code&&u<10)return u++,e.call(t,n,r,i,o,a,s);c.apply(this,arguments)}}return e.call(t,n,r,i,o,a,s)}return Object.setPrototypeOf&&Object.setPrototypeOf(n,e),n}(t.read),t.readSync="function"!=typeof t.readSync?t.readSync:(s=t.readSync,function(e,n,r,i,o){for(var a=0;;)try{return s.call(t,e,n,r,i,o)}catch(t){if("EAGAIN"===t.code&&a<10){a++;continue}throw t}});var s};var m=n.Stream,g=function(t){return{ReadStream:function e(n,r){if(!(this instanceof e))return new e(n,r);m.call(this);var i=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,r=r||{};for(var o=Object.keys(r),a=0,c=o.length;a<c;a++){var s=o[a];this[s]=r[s]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick((function(){i._read()}));t.open(this.path,this.flags,this.mode,(function(t,e){if(t)return i.emit("error",t),void(i.readable=!1);i.fd=e,i.emit("open",e),i._read()}))},WriteStream:function e(n,r){if(!(this instanceof e))return new e(n,r);m.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,r=r||{};for(var i=Object.keys(r),o=0,a=i.length;o<a;o++){var c=i[o];this[c]=r[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}};var v=function(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Object)var e={__proto__:b(t)};else e=Object.create(null);return Object.getOwnPropertyNames(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e},b=Object.getPrototypeOf||function(t){return t.__proto__};var w,S,k=t,_=y,O=g,j=v,A=r;function E(t,e){Object.defineProperty(t,w,{get:function(){return e}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(w=Symbol.for("graceful-fs.queue"),S=Symbol.for("graceful-fs.previous")):(w="___graceful-fs.queue",S="___graceful-fs.previous");var x=function(){};if(A.debuglog?x=A.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(x=function(){var t=A.format.apply(A,arguments);t="GFS4: "+t.split(/\n/).join("\nGFS4: "),console.error(t)}),!k[w]){var C=a[w]||[];E(k,C),k.close=function(t){function e(e,n){return t.call(k,e,(function(t){t||L(),"function"==typeof n&&n.apply(this,arguments)}))}return Object.defineProperty(e,S,{value:t}),e}(k.close),k.closeSync=function(t){function e(e){t.apply(k,arguments),L()}return Object.defineProperty(e,S,{value:t}),e}(k.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){x(k[w]),i.equal(k[w].length,0)}))}a[w]||E(a,k[w]);var F,I=N(j(k));function N(t){_(t),t.gracefulify=N,t.createReadStream=function(e,n){return new t.ReadStream(e,n)},t.createWriteStream=function(e,n){return new t.WriteStream(e,n)};var e=t.readFile;t.readFile=function(t,n,r){"function"==typeof n&&(r=n,n=null);return function t(n,r,i,o){return e(n,r,(function(e){!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?"function"==typeof i&&i.apply(this,arguments):T([t,[n,r,i],e,o||Date.now(),Date.now()])}))}(t,n,r)};var n=t.writeFile;t.writeFile=function(t,e,r,i){"function"==typeof r&&(i=r,r=null);return function t(e,r,i,o,a){return n(e,r,i,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof o&&o.apply(this,arguments):T([t,[e,r,i,o],n,a||Date.now(),Date.now()])}))}(t,e,r,i)};var r=t.appendFile;r&&(t.appendFile=function(t,e,n,i){"function"==typeof n&&(i=n,n=null);return function t(e,n,i,o,a){return r(e,n,i,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof o&&o.apply(this,arguments):T([t,[e,n,i,o],r,a||Date.now(),Date.now()])}))}(t,e,n,i)});var i=t.copyFile;i&&(t.copyFile=function(t,e,n,r){"function"==typeof n&&(r=n,n=0);return function t(e,n,r,o,a){return i(e,n,r,(function(i){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?"function"==typeof o&&o.apply(this,arguments):T([t,[e,n,r,o],i,a||Date.now(),Date.now()])}))}(t,e,n,r)});var o=t.readdir;t.readdir=function(t,e,n){"function"==typeof e&&(n=e,e=null);var r=a.test(process.version)?function(t,e,n,r){return o(t,i(t,e,n,r))}:function(t,e,n,r){return o(t,e,i(t,e,n,r))};return r(t,e,n);function i(t,e,n,i){return function(o,a){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?(a&&a.sort&&a.sort(),"function"==typeof n&&n.call(this,o,a)):T([r,[t,e,n],o,i||Date.now(),Date.now()])}}};var a=/^v[0-5]\./;if("v0.8"===process.version.substr(0,4)){var c=O(t);p=c.ReadStream,d=c.WriteStream}var s=t.ReadStream;s&&(p.prototype=Object.create(s.prototype),p.prototype.open=function(){var t=this;y(t.path,t.flags,t.mode,(function(e,n){e?(t.autoClose&&t.destroy(),t.emit("error",e)):(t.fd=n,t.emit("open",n),t.read())}))});var u=t.WriteStream;u&&(d.prototype=Object.create(u.prototype),d.prototype.open=function(){var t=this;y(t.path,t.flags,t.mode,(function(e,n){e?(t.destroy(),t.emit("error",e)):(t.fd=n,t.emit("open",n))}))}),Object.defineProperty(t,"ReadStream",{get:function(){return p},set:function(t){p=t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return d},set:function(t){d=t},enumerable:!0,configurable:!0});var l=p;Object.defineProperty(t,"FileReadStream",{get:function(){return l},set:function(t){l=t},enumerable:!0,configurable:!0});var f=d;function p(t,e){return this instanceof p?(s.apply(this,arguments),this):p.apply(Object.create(p.prototype),arguments)}function d(t,e){return this instanceof d?(u.apply(this,arguments),this):d.apply(Object.create(d.prototype),arguments)}Object.defineProperty(t,"FileWriteStream",{get:function(){return f},set:function(t){f=t},enumerable:!0,configurable:!0});var h=t.open;function y(t,e,n,r){return"function"==typeof n&&(r=n,n=null),function t(e,n,r,i,o){return h(e,n,r,(function(a,c){!a||"EMFILE"!==a.code&&"ENFILE"!==a.code?"function"==typeof i&&i.apply(this,arguments):T([t,[e,n,r,i],a,o||Date.now(),Date.now()])}))}(t,e,n,r)}return t.open=y,t}function T(t){x("ENQUEUE",t[0].name,t[1]),k[w].push(t),P()}function L(){for(var t=Date.now(),e=0;e<k[w].length;++e)k[w][e].length>2&&(k[w][e][3]=t,k[w][e][4]=t);P()}function P(){if(clearTimeout(F),F=void 0,0!==k[w].length){var t=k[w].shift(),e=t[0],n=t[1],r=t[2],i=t[3],o=t[4];if(void 0===i)x("RETRY",e.name,n),e.apply(null,n);else if(Date.now()-i>=6e4){x("TIMEOUT",e.name,n);var a=n.pop();"function"==typeof a&&a.call(null,r)}else{var c=Date.now()-o,s=Math.max(o-i,1);c>=Math.min(1.2*s,100)?(x("RETRY",e.name,n),e.apply(null,n.concat([i]))):k[w].push(t)}void 0===F&&(F=setTimeout(P,0))}}process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!k.__patched&&(I=N(k),k.__patched=!0),function(t){const e=u.fromCallback,n=I,r=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((t=>"function"==typeof n[t]));Object.assign(t,n),r.forEach((r=>{t[r]=e(n[r])})),t.exists=function(t,e){return"function"==typeof e?n.exists(t,e):new Promise((e=>n.exists(t,e)))},t.read=function(t,e,r,i,o,a){return"function"==typeof a?n.read(t,e,r,i,o,a):new Promise(((a,c)=>{n.read(t,e,r,i,o,((t,e,n)=>{if(t)return c(t);a({bytesRead:e,buffer:n})}))}))},t.write=function(t,e,...r){return"function"==typeof r[r.length-1]?n.write(t,e,...r):new Promise(((i,o)=>{n.write(t,e,...r,((t,e,n)=>{if(t)return o(t);i({bytesWritten:e,buffer:n})}))}))},t.readv=function(t,e,...r){return"function"==typeof r[r.length-1]?n.readv(t,e,...r):new Promise(((i,o)=>{n.readv(t,e,...r,((t,e,n)=>{if(t)return o(t);i({bytesRead:e,buffers:n})}))}))},t.writev=function(t,e,...r){return"function"==typeof r[r.length-1]?n.writev(t,e,...r):new Promise(((i,o)=>{n.writev(t,e,...r,((t,e,n)=>{if(t)return o(t);i({bytesWritten:e,buffers:n})}))}))},"function"==typeof n.realpath.native?t.realpath.native=e(n.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")}(s);var D={},M={};const $=o;M.checkPath=function(t){if("win32"===process.platform){if(/[<>:"|?*]/.test(t.replace($.parse(t).root,""))){const e=new Error(`Path contains invalid characters: ${t}`);throw e.code="EINVAL",e}}};const R=s,{checkPath:U}=M,B=t=>"number"==typeof t?t:{mode:511,...t}.mode;D.makeDir=async(t,e)=>(U(t),R.mkdir(t,{mode:B(e),recursive:!0})),D.makeDirSync=(t,e)=>(U(t),R.mkdirSync(t,{mode:B(e),recursive:!0}));const W=u.fromPromise,{makeDir:Y,makeDirSync:z}=D,q=W(Y);var J={mkdirs:q,mkdirsSync:z,mkdirp:q,mkdirpSync:z,ensureDir:q,ensureDirSync:z};const K=u.fromPromise,G=s;var V={pathExists:K((function(t){return G.access(t).then((()=>!0)).catch((()=>!1))})),pathExistsSync:G.existsSync};const Q=I;var Z=function(t,e,n,r){Q.open(t,"r+",((t,i)=>{if(t)return r(t);Q.futimes(i,e,n,(t=>{Q.close(i,(e=>{r&&r(t||e)}))}))}))},X=function(t,e,n){const r=Q.openSync(t,"r+");return Q.futimesSync(r,e,n),Q.closeSync(r)};const H=s,tt=o,et=r;function nt(t,e,n){const r=n.dereference?t=>H.stat(t,{bigint:!0}):t=>H.lstat(t,{bigint:!0});return Promise.all([r(t),r(e).catch((t=>{if("ENOENT"===t.code)return null;throw t}))]).then((([t,e])=>({srcStat:t,destStat:e})))}function rt(t,e){return e.ino&&e.dev&&e.ino===t.ino&&e.dev===t.dev}function it(t,e){const n=tt.resolve(t).split(tt.sep).filter((t=>t)),r=tt.resolve(e).split(tt.sep).filter((t=>t));return n.reduce(((t,e,n)=>t&&r[n]===e),!0)}function ot(t,e,n){return`Cannot ${n} '${t}' to a subdirectory of itself, '${e}'.`}var at={checkPaths:function(t,e,n,r,i){et.callbackify(nt)(t,e,r,((r,o)=>{if(r)return i(r);const{srcStat:a,destStat:c}=o;if(c){if(rt(a,c)){const r=tt.basename(t),o=tt.basename(e);return"move"===n&&r!==o&&r.toLowerCase()===o.toLowerCase()?i(null,{srcStat:a,destStat:c,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(a.isDirectory()&&!c.isDirectory())return i(new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`));if(!a.isDirectory()&&c.isDirectory())return i(new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`))}return a.isDirectory()&&it(t,e)?i(new Error(ot(t,e,n))):i(null,{srcStat:a,destStat:c})}))},checkPathsSync:function(t,e,n,r){const{srcStat:i,destStat:o}=function(t,e,n){let r;const i=n.dereference?t=>H.statSync(t,{bigint:!0}):t=>H.lstatSync(t,{bigint:!0}),o=i(t);try{r=i(e)}catch(t){if("ENOENT"===t.code)return{srcStat:o,destStat:null};throw t}return{srcStat:o,destStat:r}}(t,e,r);if(o){if(rt(i,o)){const r=tt.basename(t),a=tt.basename(e);if("move"===n&&r!==a&&r.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(i.isDirectory()&&it(t,e))throw new Error(ot(t,e,n));return{srcStat:i,destStat:o}},checkParentPaths:function t(e,n,r,i,o){const a=tt.resolve(tt.dirname(e)),c=tt.resolve(tt.dirname(r));if(c===a||c===tt.parse(c).root)return o();H.stat(c,{bigint:!0},((a,s)=>a?"ENOENT"===a.code?o():o(a):rt(n,s)?o(new Error(ot(e,r,i))):t(e,n,c,i,o)))},checkParentPathsSync:function t(e,n,r,i){const o=tt.resolve(tt.dirname(e)),a=tt.resolve(tt.dirname(r));if(a===o||a===tt.parse(a).root)return;let c;try{c=H.statSync(a,{bigint:!0})}catch(t){if("ENOENT"===t.code)return;throw t}if(rt(n,c))throw new Error(ot(e,r,i));return t(e,n,a,i)},isSrcSubdir:it,areIdentical:rt};const ct=I,st=o,ut=J.mkdirs,lt=V.pathExists,ft=Z,pt=at;function dt(t,e,n,r){if(!n.filter)return r(null,!0);Promise.resolve(n.filter(t,e)).then((t=>r(null,t)),(t=>r(t)))}function ht(t,e,n,r,i){(r.dereference?ct.stat:ct.lstat)(e,((o,a)=>o?i(o):a.isDirectory()?function(t,e,n,r,i,o){return e?vt(n,r,i,o):function(t,e,n,r,i){ct.mkdir(n,(o=>{if(o)return i(o);vt(e,n,r,(e=>e?i(e):gt(n,t,i)))}))}(t.mode,n,r,i,o)}(a,t,e,n,r,i):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?function(t,e,n,r,i,o){return e?function(t,e,n,r,i){if(!r.overwrite)return r.errorOnExist?i(new Error(`'${n}' already exists`)):i();ct.unlink(n,(o=>o?i(o):yt(t,e,n,r,i)))}(t,n,r,i,o):yt(t,n,r,i,o)}(a,t,e,n,r,i):a.isSymbolicLink()?function(t,e,n,r,i){ct.readlink(e,((e,o)=>e?i(e):(r.dereference&&(o=st.resolve(process.cwd(),o)),t?void ct.readlink(n,((t,e)=>t?"EINVAL"===t.code||"UNKNOWN"===t.code?ct.symlink(o,n,i):i(t):(r.dereference&&(e=st.resolve(process.cwd(),e)),pt.isSrcSubdir(o,e)?i(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${e}'.`)):pt.isSrcSubdir(e,o)?i(new Error(`Cannot overwrite '${e}' with '${o}'.`)):function(t,e,n){ct.unlink(e,(r=>r?n(r):ct.symlink(t,e,n)))}(o,n,i)))):ct.symlink(o,n,i))))}(t,e,n,r,i):a.isSocket()?i(new Error(`Cannot copy a socket file: ${e}`)):a.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${e}`)):i(new Error(`Unknown file: ${e}`))))}function yt(t,e,n,r,i){ct.copyFile(e,n,(o=>o?i(o):r.preserveTimestamps?function(t,e,n,r){if(function(t){return 0==(128&t)}(t))return function(t,e,n){return gt(t,128|e,n)}(n,t,(i=>i?r(i):mt(t,e,n,r)));return mt(t,e,n,r)}(t.mode,e,n,i):gt(n,t.mode,i)))}function mt(t,e,n,r){!function(t,e,n){ct.stat(t,((t,r)=>t?n(t):ft(e,r.atime,r.mtime,n)))}(e,n,(e=>e?r(e):gt(n,t,r)))}function gt(t,e,n){return ct.chmod(t,e,n)}function vt(t,e,n,r){ct.readdir(t,((i,o)=>i?r(i):bt(o,t,e,n,r)))}function bt(t,e,n,r,i){const o=t.pop();return o?function(t,e,n,r,i,o){const a=st.join(n,e),c=st.join(r,e);dt(a,c,i,((e,s)=>e?o(e):s?void pt.checkPaths(a,c,"copy",i,((e,s)=>{if(e)return o(e);const{destStat:u}=s;ht(u,a,c,i,(e=>e?o(e):bt(t,n,r,i,o)))})):bt(t,n,r,i,o)))}(t,o,e,n,r,i):i()}var wt=function(t,e,n,r){"function"!=typeof n||r?"function"==typeof n&&(n={filter:n}):(r=n,n={}),r=r||function(){},(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001"),pt.checkPaths(t,e,"copy",n,((i,o)=>{if(i)return r(i);const{srcStat:a,destStat:c}=o;pt.checkParentPaths(t,a,e,"copy",(i=>{if(i)return r(i);dt(t,e,n,((i,o)=>i?r(i):o?void function(t,e,n,r,i){const o=st.dirname(n);lt(o,((a,c)=>a?i(a):c?ht(t,e,n,r,i):void ut(o,(o=>o?i(o):ht(t,e,n,r,i)))))}(c,t,e,n,r):r()))}))}))};const St=I,kt=o,_t=J.mkdirsSync,Ot=X,jt=at;function At(t,e,n,r){const i=(r.dereference?St.statSync:St.lstatSync)(e);if(i.isDirectory())return function(t,e,n,r,i){return e?Ct(n,r,i):function(t,e,n,r){return St.mkdirSync(n),Ct(e,n,r),xt(n,t)}(t.mode,n,r,i)}(i,t,e,n,r);if(i.isFile()||i.isCharacterDevice()||i.isBlockDevice())return function(t,e,n,r,i){return e?function(t,e,n,r){if(r.overwrite)return St.unlinkSync(n),Et(t,e,n,r);if(r.errorOnExist)throw new Error(`'${n}' already exists`)}(t,n,r,i):Et(t,n,r,i)}(i,t,e,n,r);if(i.isSymbolicLink())return function(t,e,n,r){let i=St.readlinkSync(e);r.dereference&&(i=kt.resolve(process.cwd(),i));if(t){let t;try{t=St.readlinkSync(n)}catch(t){if("EINVAL"===t.code||"UNKNOWN"===t.code)return St.symlinkSync(i,n);throw t}if(r.dereference&&(t=kt.resolve(process.cwd(),t)),jt.isSrcSubdir(i,t))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${t}'.`);if(jt.isSrcSubdir(t,i))throw new Error(`Cannot overwrite '${t}' with '${i}'.`);return function(t,e){return St.unlinkSync(e),St.symlinkSync(t,e)}(i,n)}return St.symlinkSync(i,n)}(t,e,n,r);if(i.isSocket())throw new Error(`Cannot copy a socket file: ${e}`);if(i.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${e}`);throw new Error(`Unknown file: ${e}`)}function Et(t,e,n,r){return St.copyFileSync(e,n),r.preserveTimestamps&&function(t,e,n){(function(t){return 0==(128&t)})(t)&&function(t,e){xt(t,128|e)}(n,t);(function(t,e){const n=St.statSync(t);Ot(e,n.atime,n.mtime)})(e,n)}(t.mode,e,n),xt(n,t.mode)}function xt(t,e){return St.chmodSync(t,e)}function Ct(t,e,n){St.readdirSync(t).forEach((r=>function(t,e,n,r){const i=kt.join(e,t),o=kt.join(n,t);if(r.filter&&!r.filter(i,o))return;const{destStat:a}=jt.checkPathsSync(i,o,"copy",r);return At(a,i,o,r)}(r,t,e,n)))}var Ft=function(t,e,n){"function"==typeof n&&(n={filter:n}),(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");const{srcStat:r,destStat:i}=jt.checkPathsSync(t,e,"copy",n);if(jt.checkParentPathsSync(t,r,e,"copy"),n.filter&&!n.filter(t,e))return;const o=kt.dirname(e);return St.existsSync(o)||_t(o),At(i,t,e,n)};var It={copy:(0,u.fromCallback)(wt),copySync:Ft};const Nt=I;var Tt={remove:(0,u.fromCallback)((function(t,e){Nt.rm(t,{recursive:!0,force:!0},e)})),removeSync:function(t){Nt.rmSync(t,{recursive:!0,force:!0})}};const Lt=u.fromPromise,Pt=s,Dt=o,Mt=J,$t=Tt,Rt=Lt((async function(t){let e;try{e=await Pt.readdir(t)}catch{return Mt.mkdirs(t)}return Promise.all(e.map((e=>$t.remove(Dt.join(t,e)))))}));function Ut(t){let e;try{e=Pt.readdirSync(t)}catch{return Mt.mkdirsSync(t)}e.forEach((e=>{e=Dt.join(t,e),$t.removeSync(e)}))}var Bt={emptyDirSync:Ut,emptydirSync:Ut,emptyDir:Rt,emptydir:Rt};const Wt=u.fromCallback,Yt=o,zt=I,qt=J;var Jt={createFile:Wt((function(t,e){function n(){zt.writeFile(t,"",(t=>{if(t)return e(t);e()}))}zt.stat(t,((r,i)=>{if(!r&&i.isFile())return e();const o=Yt.dirname(t);zt.stat(o,((t,r)=>{if(t)return"ENOENT"===t.code?qt.mkdirs(o,(t=>{if(t)return e(t);n()})):e(t);r.isDirectory()?n():zt.readdir(o,(t=>{if(t)return e(t)}))}))}))})),createFileSync:function(t){let e;try{e=zt.statSync(t)}catch{}if(e&&e.isFile())return;const n=Yt.dirname(t);try{zt.statSync(n).isDirectory()||zt.readdirSync(n)}catch(t){if(!t||"ENOENT"!==t.code)throw t;qt.mkdirsSync(n)}zt.writeFileSync(t,"")}};const Kt=u.fromCallback,Gt=o,Vt=I,Qt=J,Zt=V.pathExists,{areIdentical:Xt}=at;var Ht={createLink:Kt((function(t,e,n){function r(t,e){Vt.link(t,e,(t=>{if(t)return n(t);n(null)}))}Vt.lstat(e,((i,o)=>{Vt.lstat(t,((i,a)=>{if(i)return i.message=i.message.replace("lstat","ensureLink"),n(i);if(o&&Xt(a,o))return n(null);const c=Gt.dirname(e);Zt(c,((i,o)=>i?n(i):o?r(t,e):void Qt.mkdirs(c,(i=>{if(i)return n(i);r(t,e)}))))}))}))})),createLinkSync:function(t,e){let n;try{n=Vt.lstatSync(e)}catch{}try{const e=Vt.lstatSync(t);if(n&&Xt(e,n))return}catch(t){throw t.message=t.message.replace("lstat","ensureLink"),t}const r=Gt.dirname(e);return Vt.existsSync(r)||Qt.mkdirsSync(r),Vt.linkSync(t,e)}};const te=o,ee=I,ne=V.pathExists;var re={symlinkPaths:function(t,e,n){if(te.isAbsolute(t))return ee.lstat(t,(e=>e?(e.message=e.message.replace("lstat","ensureSymlink"),n(e)):n(null,{toCwd:t,toDst:t})));{const r=te.dirname(e),i=te.join(r,t);return ne(i,((e,o)=>e?n(e):o?n(null,{toCwd:i,toDst:t}):ee.lstat(t,(e=>e?(e.message=e.message.replace("lstat","ensureSymlink"),n(e)):n(null,{toCwd:t,toDst:te.relative(r,t)})))))}},symlinkPathsSync:function(t,e){let n;if(te.isAbsolute(t)){if(n=ee.existsSync(t),!n)throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}{const r=te.dirname(e),i=te.join(r,t);if(n=ee.existsSync(i),n)return{toCwd:i,toDst:t};if(n=ee.existsSync(t),!n)throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:te.relative(r,t)}}}};const ie=I;var oe={symlinkType:function(t,e,n){if(n="function"==typeof e?e:n,e="function"!=typeof e&&e)return n(null,e);ie.lstat(t,((t,r)=>{if(t)return n(null,"file");e=r&&r.isDirectory()?"dir":"file",n(null,e)}))},symlinkTypeSync:function(t,e){let n;if(e)return e;try{n=ie.lstatSync(t)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}};const ae=u.fromCallback,ce=o,se=s,ue=J.mkdirs,le=J.mkdirsSync,fe=re.symlinkPaths,pe=re.symlinkPathsSync,de=oe.symlinkType,he=oe.symlinkTypeSync,ye=V.pathExists,{areIdentical:me}=at;function ge(t,e,n,r){fe(t,e,((i,o)=>{if(i)return r(i);t=o.toDst,de(o.toCwd,n,((n,i)=>{if(n)return r(n);const o=ce.dirname(e);ye(o,((n,a)=>n?r(n):a?se.symlink(t,e,i,r):void ue(o,(n=>{if(n)return r(n);se.symlink(t,e,i,r)}))))}))}))}var ve={createSymlink:ae((function(t,e,n,r){r="function"==typeof n?n:r,n="function"!=typeof n&&n,se.lstat(e,((i,o)=>{!i&&o.isSymbolicLink()?Promise.all([se.stat(t),se.stat(e)]).then((([i,o])=>{if(me(i,o))return r(null);ge(t,e,n,r)})):ge(t,e,n,r)}))})),createSymlinkSync:function(t,e,n){let r;try{r=se.lstatSync(e)}catch{}if(r&&r.isSymbolicLink()){const n=se.statSync(t),r=se.statSync(e);if(me(n,r))return}const i=pe(t,e);t=i.toDst,n=he(i.toCwd,n);const o=ce.dirname(e);return se.existsSync(o)||le(o),se.symlinkSync(t,e,n)}};const{createFile:be,createFileSync:we}=Jt,{createLink:Se,createLinkSync:ke}=Ht,{createSymlink:_e,createSymlinkSync:Oe}=ve;var je={createFile:be,createFileSync:we,ensureFile:be,ensureFileSync:we,createLink:Se,createLinkSync:ke,ensureLink:Se,ensureLinkSync:ke,createSymlink:_e,createSymlinkSync:Oe,ensureSymlink:_e,ensureSymlinkSync:Oe};var Ae={stringify:function(t,{EOL:e="\n",finalEOL:n=!0,replacer:r=null,spaces:i}={}){const o=n?e:"";return JSON.stringify(t,r,i).replace(/\n/g,e)+o},stripBom:function(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}};let Ee;try{Ee=I}catch(e){Ee=t}const xe=u,{stringify:Ce,stripBom:Fe}=Ae;const Ie=xe.fromPromise((async function(t,e={}){"string"==typeof e&&(e={encoding:e});const n=e.fs||Ee,r=!("throws"in e)||e.throws;let i,o=await xe.fromCallback(n.readFile)(t,e);o=Fe(o);try{i=JSON.parse(o,e?e.reviver:null)}catch(e){if(r)throw e.message=`${t}: ${e.message}`,e;return null}return i}));const Ne=xe.fromPromise((async function(t,e,n={}){const r=n.fs||Ee,i=Ce(e,n);await xe.fromCallback(r.writeFile)(t,i,n)}));const Te={readFile:Ie,readFileSync:function(t,e={}){"string"==typeof e&&(e={encoding:e});const n=e.fs||Ee,r=!("throws"in e)||e.throws;try{let r=n.readFileSync(t,e);return r=Fe(r),JSON.parse(r,e.reviver)}catch(e){if(r)throw e.message=`${t}: ${e.message}`,e;return null}},writeFile:Ne,writeFileSync:function(t,e,n={}){const r=n.fs||Ee,i=Ce(e,n);return r.writeFileSync(t,i,n)}};var Le={readJson:Te.readFile,readJsonSync:Te.readFileSync,writeJson:Te.writeFile,writeJsonSync:Te.writeFileSync};const Pe=u.fromCallback,De=I,Me=o,$e=J,Re=V.pathExists;var Ue={outputFile:Pe((function(t,e,n,r){"function"==typeof n&&(r=n,n="utf8");const i=Me.dirname(t);Re(i,((o,a)=>o?r(o):a?De.writeFile(t,e,n,r):void $e.mkdirs(i,(i=>{if(i)return r(i);De.writeFile(t,e,n,r)}))))})),outputFileSync:function(t,...e){const n=Me.dirname(t);if(De.existsSync(n))return De.writeFileSync(t,...e);$e.mkdirsSync(n),De.writeFileSync(t,...e)}};const{stringify:Be}=Ae,{outputFile:We}=Ue;var Ye=async function(t,e,n={}){const r=Be(e,n);await We(t,r,n)};const{stringify:ze}=Ae,{outputFileSync:qe}=Ue;var Je=function(t,e,n){const r=ze(e,n);qe(t,r,n)};const Ke=u.fromPromise,Ge=Le;Ge.outputJson=Ke(Ye),Ge.outputJsonSync=Je,Ge.outputJSON=Ge.outputJson,Ge.outputJSONSync=Ge.outputJsonSync,Ge.writeJSON=Ge.writeJson,Ge.writeJSONSync=Ge.writeJsonSync,Ge.readJSON=Ge.readJson,Ge.readJSONSync=Ge.readJsonSync;var Ve=Ge;const Qe=I,Ze=o,Xe=It.copy,He=Tt.remove,tn=J.mkdirp,en=V.pathExists,nn=at;function rn(t,e,n,r,i){return r?on(t,e,n,i):n?He(e,(r=>r?i(r):on(t,e,n,i))):void en(e,((r,o)=>r?i(r):o?i(new Error("dest already exists.")):on(t,e,n,i)))}function on(t,e,n,r){Qe.rename(t,e,(i=>i?"EXDEV"!==i.code?r(i):function(t,e,n,r){const i={overwrite:n,errorOnExist:!0};Xe(t,e,i,(e=>e?r(e):He(t,r)))}(t,e,n,r):r()))}var an=function(t,e,n,r){"function"==typeof n&&(r=n,n={});const i=(n=n||{}).overwrite||n.clobber||!1;nn.checkPaths(t,e,"move",n,((n,o)=>{if(n)return r(n);const{srcStat:a,isChangingCase:c=!1}=o;nn.checkParentPaths(t,a,e,"move",(n=>n?r(n):function(t){const e=Ze.dirname(t);return Ze.parse(e).root===e}(e)?rn(t,e,i,c,r):void tn(Ze.dirname(e),(n=>n?r(n):rn(t,e,i,c,r)))))}))};const cn=I,sn=o,un=It.copySync,ln=Tt.removeSync,fn=J.mkdirpSync,pn=at;function dn(t,e,n){try{cn.renameSync(t,e)}catch(r){if("EXDEV"!==r.code)throw r;return function(t,e,n){const r={overwrite:n,errorOnExist:!0};return un(t,e,r),ln(t)}(t,e,n)}}var hn=function(t,e,n){const r=(n=n||{}).overwrite||n.clobber||!1,{srcStat:i,isChangingCase:o=!1}=pn.checkPathsSync(t,e,"move",n);return pn.checkParentPathsSync(t,i,e,"move"),function(t){const e=sn.dirname(t);return sn.parse(e).root===e}(e)||fn(sn.dirname(e)),function(t,e,n,r){if(r)return dn(t,e,n);if(n)return ln(e),dn(t,e,n);if(cn.existsSync(e))throw new Error("dest already exists.");return dn(t,e,n)}(t,e,r,o)};var yn={move:(0,u.fromCallback)(an),moveSync:hn},mn=c({...s,...It,...Bt,...je,...Ve,...J,...yn,...Ue,...V,...Tt});
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
function gn(t){return null==t}var vn=function(t,e){var n,r,i,o;if(e)for(n=0,r=(o=Object.keys(e)).length;n<r;n+=1)t[i=o[n]]=e[i];return t},bn={isNothing:gn,isObject:function(t){return"object"==typeof t&&null!==t},toArray:function(t){return Array.isArray(t)?t:gn(t)?[]:[t]},repeat:function(t,e){var n,r="";for(n=0;n<e;n+=1)r+=t;return r},isNegativeZero:function(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},extend:vn};function wn(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+="\n\n"+t.mark.snippet),r+" "+n):r}function Sn(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=wn(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}Sn.prototype=Object.create(Error.prototype),Sn.prototype.constructor=Sn,Sn.prototype.toString=function(t){return this.name+": "+wn(this,t)};var kn=Sn;function _n(t,e,n,r,i){var o="",a="",c=Math.floor(i/2)-1;return r-e>c&&(e=r-c+(o=" ... ").length),n-r>c&&(n=r+c-(a=" ...").length),{str:o+t.slice(e,n).replace(/\t/g,"â†’")+a,pos:r-e+o.length}}function On(t,e){return bn.repeat(" ",e-t.length)+t}var jn=function(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),"number"!=typeof e.indent&&(e.indent=1),"number"!=typeof e.linesBefore&&(e.linesBefore=3),"number"!=typeof e.linesAfter&&(e.linesAfter=2);for(var n,r=/\r?\n|\r|\0/g,i=[0],o=[],a=-1;n=r.exec(t.buffer);)o.push(n.index),i.push(n.index+n[0].length),t.position<=n.index&&a<0&&(a=i.length-2);a<0&&(a=i.length-1);var c,s,u="",l=Math.min(t.line+e.linesAfter,o.length).toString().length,f=e.maxLength-(e.indent+l+3);for(c=1;c<=e.linesBefore&&!(a-c<0);c++)s=_n(t.buffer,i[a-c],o[a-c],t.position-(i[a]-i[a-c]),f),u=bn.repeat(" ",e.indent)+On((t.line-c+1).toString(),l)+" | "+s.str+"\n"+u;for(s=_n(t.buffer,i[a],o[a],t.position,f),u+=bn.repeat(" ",e.indent)+On((t.line+1).toString(),l)+" | "+s.str+"\n",u+=bn.repeat("-",e.indent+l+3+s.pos)+"^\n",c=1;c<=e.linesAfter&&!(a+c>=o.length);c++)s=_n(t.buffer,i[a+c],o[a+c],t.position-(i[a]-i[a+c]),f),u+=bn.repeat(" ",e.indent)+On((t.line+c+1).toString(),l)+" | "+s.str+"\n";return u.replace(/\n$/,"")},An=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],En=["scalar","sequence","mapping"];var xn=function(t,e){if(e=e||{},Object.keys(e).forEach((function(e){if(-1===An.indexOf(e))throw new kn('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')})),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=function(t){var e={};return null!==t&&Object.keys(t).forEach((function(n){t[n].forEach((function(t){e[String(t)]=n}))})),e}(e.styleAliases||null),-1===En.indexOf(this.kind))throw new kn('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')};function Cn(t,e){var n=[];return t[e].forEach((function(t){var e=n.length;n.forEach((function(n,r){n.tag===t.tag&&n.kind===t.kind&&n.multi===t.multi&&(e=r)})),n[e]=t})),n}function Fn(t){return this.extend(t)}Fn.prototype.extend=function(t){var e=[],n=[];if(t instanceof xn)n.push(t);else if(Array.isArray(t))n=n.concat(t);else{if(!t||!Array.isArray(t.implicit)&&!Array.isArray(t.explicit))throw new kn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.implicit&&(e=e.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit))}e.forEach((function(t){if(!(t instanceof xn))throw new kn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(t.loadKind&&"scalar"!==t.loadKind)throw new kn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(t.multi)throw new kn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(t){if(!(t instanceof xn))throw new kn("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var r=Object.create(Fn.prototype);return r.implicit=(this.implicit||[]).concat(e),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=Cn(r,"implicit"),r.compiledExplicit=Cn(r,"explicit"),r.compiledTypeMap=function(){var t,e,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function r(t){t.multi?(n.multi[t.kind].push(t),n.multi.fallback.push(t)):n[t.kind][t.tag]=n.fallback[t.tag]=t}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(r);return n}(r.compiledImplicit,r.compiledExplicit),r};var In=new Fn({explicit:[new xn("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),new xn("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),new xn("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}})]});var Nn=new xn("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(t){if(null===t)return!0;var e=t.length;return 1===e&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)},construct:function(){return null},predicate:function(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var Tn=new xn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e=t.length;return 4===e&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t)},construct:function(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Ln(t){return 48<=t&&t<=55}function Pn(t){return 48<=t&&t<=57}var Dn=new xn("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,n,r=t.length,i=0,o=!1;if(!r)return!1;if("-"!==(e=t[i])&&"+"!==e||(e=t[++i]),"0"===e){if(i+1===r)return!0;if("b"===(e=t[++i])){for(i++;i<r;i++)if("_"!==(e=t[i])){if("0"!==e&&"1"!==e)return!1;o=!0}return o&&"_"!==e}if("x"===e){for(i++;i<r;i++)if("_"!==(e=t[i])){if(!(48<=(n=t.charCodeAt(i))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;o=!0}return o&&"_"!==e}if("o"===e){for(i++;i<r;i++)if("_"!==(e=t[i])){if(!Ln(t.charCodeAt(i)))return!1;o=!0}return o&&"_"!==e}}if("_"===e)return!1;for(;i<r;i++)if("_"!==(e=t[i])){if(!Pn(t.charCodeAt(i)))return!1;o=!0}return!(!o||"_"===e)},construct:function(t){var e,n=t,r=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(e=n[0])&&"+"!==e||("-"===e&&(r=-1),e=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===e){if("b"===n[1])return r*parseInt(n.slice(2),2);if("x"===n[1])return r*parseInt(n.slice(2),16);if("o"===n[1])return r*parseInt(n.slice(2),8)}return r*parseInt(n,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!bn.isNegativeZero(t)},represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Mn=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var $n=/^[-+]?[0-9]+e/;var Rn=new xn("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(t){return null!==t&&!(!Mn.test(t)||"_"===t[t.length-1])},construct:function(t){var e,n;return n="-"===(e=t.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),".inf"===e?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===e?NaN:n*parseFloat(e,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||bn.isNegativeZero(t))},represent:function(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(bn.isNegativeZero(t))return"-0.0";return n=t.toString(10),$n.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),Un=In.extend({implicit:[Nn,Tn,Dn,Rn]}),Bn=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Wn=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var Yn=new xn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(t){return null!==t&&(null!==Bn.exec(t)||null!==Wn.exec(t))},construct:function(t){var e,n,r,i,o,a,c,s,u=0,l=null;if(null===(e=Bn.exec(t))&&(e=Wn.exec(t)),null===e)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(o=+e[4],a=+e[5],c=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(l=6e4*(60*+e[10]+ +(e[11]||0)),"-"===e[9]&&(l=-l)),s=new Date(Date.UTC(n,r,i,o,a,c,u)),l&&s.setTime(s.getTime()-l),s},instanceOf:Date,represent:function(t){return t.toISOString()}});var zn=new xn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(t){return"<<"===t||null===t}}),qn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var Jn=new xn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,n,r=0,i=t.length,o=qn;for(n=0;n<i;n++)if(!((e=o.indexOf(t.charAt(n)))>64)){if(e<0)return!1;r+=6}return r%8==0},construct:function(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,o=qn,a=0,c=[];for(e=0;e<i;e++)e%4==0&&e&&(c.push(a>>16&255),c.push(a>>8&255),c.push(255&a)),a=a<<6|o.indexOf(r.charAt(e));return 0===(n=i%4*6)?(c.push(a>>16&255),c.push(a>>8&255),c.push(255&a)):18===n?(c.push(a>>10&255),c.push(a>>2&255)):12===n&&c.push(a>>4&255),new Uint8Array(c)},predicate:function(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)},represent:function(t){var e,n,r="",i=0,o=t.length,a=qn;for(e=0;e<o;e++)e%3==0&&e&&(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]),i=(i<<8)+t[e];return 0===(n=o%3)?(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]):2===n?(r+=a[i>>10&63],r+=a[i>>4&63],r+=a[i<<2&63],r+=a[64]):1===n&&(r+=a[i>>2&63],r+=a[i<<4&63],r+=a[64],r+=a[64]),r}}),Kn=Object.prototype.hasOwnProperty,Gn=Object.prototype.toString;var Vn=new xn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,n,r,i,o,a=[],c=t;for(e=0,n=c.length;e<n;e+=1){if(r=c[e],o=!1,"[object Object]"!==Gn.call(r))return!1;for(i in r)if(Kn.call(r,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==a.indexOf(i))return!1;a.push(i)}return!0},construct:function(t){return null!==t?t:[]}}),Qn=Object.prototype.toString;var Zn=new xn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1){if(r=a[e],"[object Object]"!==Qn.call(r))return!1;if(1!==(i=Object.keys(r)).length)return!1;o[e]=[i[0],r[i[0]]]}return!0},construct:function(t){if(null===t)return[];var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1)r=a[e],i=Object.keys(r),o[e]=[i[0],r[i[0]]];return o}}),Xn=Object.prototype.hasOwnProperty;var Hn=new xn("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(t){if(null===t)return!0;var e,n=t;for(e in n)if(Xn.call(n,e)&&null!==n[e])return!1;return!0},construct:function(t){return null!==t?t:{}}}),tr=Un.extend({implicit:[Yn,zn],explicit:[Jn,Vn,Zn,Hn]}),er=Object.prototype.hasOwnProperty,nr=1,rr=2,ir=3,or=4,ar=1,cr=2,sr=3,ur=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,lr=/[\x85\u2028\u2029]/,fr=/[,\[\]\{\}]/,pr=/^(?:!|!!|![a-z\-]+!)$/i,dr=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function hr(t){return Object.prototype.toString.call(t)}function yr(t){return 10===t||13===t}function mr(t){return 9===t||32===t}function gr(t){return 9===t||32===t||10===t||13===t}function vr(t){return 44===t||91===t||93===t||123===t||125===t}function br(t){var e;return 48<=t&&t<=57?t-48:97<=(e=32|t)&&e<=102?e-97+10:-1}function wr(t){return 48===t?"\0":97===t?"":98===t?"\b":116===t||9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"Â…":95===t?"Â ":76===t?"\u2028":80===t?"\u2029":""}function Sr(t){return t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}for(var kr=new Array(256),_r=new Array(256),Or=0;Or<256;Or++)kr[Or]=wr(Or)?1:0,_r[Or]=wr(Or);function jr(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||tr,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Ar(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=jn(n),new kn(e,n)}function Er(t,e){throw Ar(t,e)}function xr(t,e){t.onWarning&&t.onWarning.call(null,Ar(t,e))}var Cr={YAML:function(t,e,n){var r,i,o;null!==t.version&&Er(t,"duplication of %YAML directive"),1!==n.length&&Er(t,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&Er(t,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),o=parseInt(r[2],10),1!==i&&Er(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,1!==o&&2!==o&&xr(t,"unsupported YAML version of the document")},TAG:function(t,e,n){var r,i;2!==n.length&&Er(t,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],pr.test(r)||Er(t,"ill-formed tag handle (first argument) of the TAG directive"),er.call(t.tagMap,r)&&Er(t,'there is a previously declared suffix for "'+r+'" tag handle'),dr.test(i)||Er(t,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch(e){Er(t,"tag prefix is malformed: "+i)}t.tagMap[r]=i}};function Fr(t,e,n,r){var i,o,a,c;if(e<n){if(c=t.input.slice(e,n),r)for(i=0,o=c.length;i<o;i+=1)9===(a=c.charCodeAt(i))||32<=a&&a<=1114111||Er(t,"expected valid JSON character");else ur.test(c)&&Er(t,"the stream contains non-printable characters");t.result+=c}}function Ir(t,e,n,r){var i,o,a,c;for(bn.isObject(n)||Er(t,"cannot merge mappings; the provided source object is unacceptable"),a=0,c=(i=Object.keys(n)).length;a<c;a+=1)o=i[a],er.call(e,o)||(e[o]=n[o],r[o]=!0)}function Nr(t,e,n,r,i,o,a,c,s){var u,l;if(Array.isArray(i))for(u=0,l=(i=Array.prototype.slice.call(i)).length;u<l;u+=1)Array.isArray(i[u])&&Er(t,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===hr(i[u])&&(i[u]="[object Object]");if("object"==typeof i&&"[object Object]"===hr(i)&&(i="[object Object]"),i=String(i),null===e&&(e={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(o))for(u=0,l=o.length;u<l;u+=1)Ir(t,e,o[u],n);else Ir(t,e,o,n);else t.json||er.call(n,i)||!er.call(e,i)||(t.line=a||t.line,t.lineStart=c||t.lineStart,t.position=s||t.position,Er(t,"duplicated mapping key")),"__proto__"===i?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete n[i];return e}function Tr(t){var e;10===(e=t.input.charCodeAt(t.position))?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):Er(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Lr(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);0!==i;){for(;mr(i);)9===i&&-1===t.firstTabInLine&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&35===i)do{i=t.input.charCodeAt(++t.position)}while(10!==i&&13!==i&&0!==i);if(!yr(i))break;for(Tr(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;32===i;)t.lineIndent++,i=t.input.charCodeAt(++t.position)}return-1!==n&&0!==r&&t.lineIndent<n&&xr(t,"deficient indentation"),r}function Pr(t){var e,n=t.position;return!(45!==(e=t.input.charCodeAt(n))&&46!==e||e!==t.input.charCodeAt(n+1)||e!==t.input.charCodeAt(n+2)||(n+=3,0!==(e=t.input.charCodeAt(n))&&!gr(e)))}function Dr(t,e){1===e?t.result+=" ":e>1&&(t.result+=bn.repeat("\n",e-1))}function Mr(t,e){var n,r,i=t.tag,o=t.anchor,a=[],c=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=a),r=t.input.charCodeAt(t.position);0!==r&&(-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,Er(t,"tab characters must not be used in indentation")),45===r)&&gr(t.input.charCodeAt(t.position+1));)if(c=!0,t.position++,Lr(t,!0,-1)&&t.lineIndent<=e)a.push(null),r=t.input.charCodeAt(t.position);else if(n=t.line,Ur(t,e,ir,!1,!0),a.push(t.result),Lr(t,!0,-1),r=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&0!==r)Er(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!c&&(t.tag=i,t.anchor=o,t.kind="sequence",t.result=a,!0)}function $r(t){var e,n,r,i,o=!1,a=!1;if(33!==(i=t.input.charCodeAt(t.position)))return!1;if(null!==t.tag&&Er(t,"duplication of a tag property"),60===(i=t.input.charCodeAt(++t.position))?(o=!0,i=t.input.charCodeAt(++t.position)):33===i?(a=!0,n="!!",i=t.input.charCodeAt(++t.position)):n="!",e=t.position,o){do{i=t.input.charCodeAt(++t.position)}while(0!==i&&62!==i);t.position<t.length?(r=t.input.slice(e,t.position),i=t.input.charCodeAt(++t.position)):Er(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!gr(i);)33===i&&(a?Er(t,"tag suffix cannot contain exclamation marks"):(n=t.input.slice(e-1,t.position+1),pr.test(n)||Er(t,"named tag handle cannot contain such characters"),a=!0,e=t.position+1)),i=t.input.charCodeAt(++t.position);r=t.input.slice(e,t.position),fr.test(r)&&Er(t,"tag suffix cannot contain flow indicator characters")}r&&!dr.test(r)&&Er(t,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch(e){Er(t,"tag name is malformed: "+r)}return o?t.tag=r:er.call(t.tagMap,n)?t.tag=t.tagMap[n]+r:"!"===n?t.tag="!"+r:"!!"===n?t.tag="tag:yaml.org,2002:"+r:Er(t,'undeclared tag handle "'+n+'"'),!0}function Rr(t){var e,n;if(38!==(n=t.input.charCodeAt(t.position)))return!1;for(null!==t.anchor&&Er(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;0!==n&&!gr(n)&&!vr(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Er(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function Ur(t,e,n,r,i){var o,a,c,s,u,l,f,p,d,h=1,y=!1,m=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=c=or===n||ir===n,r&&Lr(t,!0,-1)&&(y=!0,t.lineIndent>e?h=1:t.lineIndent===e?h=0:t.lineIndent<e&&(h=-1)),1===h)for(;$r(t)||Rr(t);)Lr(t,!0,-1)?(y=!0,c=o,t.lineIndent>e?h=1:t.lineIndent===e?h=0:t.lineIndent<e&&(h=-1)):c=!1;if(c&&(c=y||i),1!==h&&or!==n||(p=nr===n||rr===n?e:e+1,d=t.position-t.lineStart,1===h?c&&(Mr(t,d)||function(t,e,n){var r,i,o,a,c,s,u,l=t.tag,f=t.anchor,p={},d=Object.create(null),h=null,y=null,m=null,g=!1,v=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=p),u=t.input.charCodeAt(t.position);0!==u;){if(g||-1===t.firstTabInLine||(t.position=t.firstTabInLine,Er(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),o=t.line,63!==u&&58!==u||!gr(r)){if(a=t.line,c=t.lineStart,s=t.position,!Ur(t,n,rr,!1,!0))break;if(t.line===o){for(u=t.input.charCodeAt(t.position);mr(u);)u=t.input.charCodeAt(++t.position);if(58===u)gr(u=t.input.charCodeAt(++t.position))||Er(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(Nr(t,p,d,h,y,null,a,c,s),h=y=m=null),v=!0,g=!1,i=!1,h=t.tag,y=t.result;else{if(!v)return t.tag=l,t.anchor=f,!0;Er(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!v)return t.tag=l,t.anchor=f,!0;Er(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===u?(g&&(Nr(t,p,d,h,y,null,a,c,s),h=y=m=null),v=!0,g=!0,i=!0):g?(g=!1,i=!0):Er(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,u=r;if((t.line===o||t.lineIndent>e)&&(g&&(a=t.line,c=t.lineStart,s=t.position),Ur(t,e,or,!0,i)&&(g?y=t.result:m=t.result),g||(Nr(t,p,d,h,y,m,a,c,s),h=y=m=null),Lr(t,!0,-1),u=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&0!==u)Er(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return g&&Nr(t,p,d,h,y,null,a,c,s),v&&(t.tag=l,t.anchor=f,t.kind="mapping",t.result=p),v}(t,d,p))||function(t,e){var n,r,i,o,a,c,s,u,l,f,p,d,h=!0,y=t.tag,m=t.anchor,g=Object.create(null);if(91===(d=t.input.charCodeAt(t.position)))a=93,u=!1,o=[];else{if(123!==d)return!1;a=125,u=!0,o={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=o),d=t.input.charCodeAt(++t.position);0!==d;){if(Lr(t,!0,e),(d=t.input.charCodeAt(t.position))===a)return t.position++,t.tag=y,t.anchor=m,t.kind=u?"mapping":"sequence",t.result=o,!0;h?44===d&&Er(t,"expected the node content, but found ','"):Er(t,"missed comma between flow collection entries"),p=null,c=s=!1,63===d&&gr(t.input.charCodeAt(t.position+1))&&(c=s=!0,t.position++,Lr(t,!0,e)),n=t.line,r=t.lineStart,i=t.position,Ur(t,e,nr,!1,!0),f=t.tag,l=t.result,Lr(t,!0,e),d=t.input.charCodeAt(t.position),!s&&t.line!==n||58!==d||(c=!0,d=t.input.charCodeAt(++t.position),Lr(t,!0,e),Ur(t,e,nr,!1,!0),p=t.result),u?Nr(t,o,g,f,l,p,n,r,i):c?o.push(Nr(t,null,g,f,l,p,n,r,i)):o.push(l),Lr(t,!0,e),44===(d=t.input.charCodeAt(t.position))?(h=!0,d=t.input.charCodeAt(++t.position)):h=!1}Er(t,"unexpected end of the stream within a flow collection")}(t,p)?m=!0:(a&&function(t,e){var n,r,i,o,a,c=ar,s=!1,u=!1,l=e,f=0,p=!1;if(124===(o=t.input.charCodeAt(t.position)))r=!1;else{if(62!==o)return!1;r=!0}for(t.kind="scalar",t.result="";0!==o;)if(43===(o=t.input.charCodeAt(++t.position))||45===o)ar===c?c=43===o?sr:cr:Er(t,"repeat of a chomping mode identifier");else{if(!((i=48<=(a=o)&&a<=57?a-48:-1)>=0))break;0===i?Er(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):u?Er(t,"repeat of an indentation width identifier"):(l=e+i-1,u=!0)}if(mr(o)){do{o=t.input.charCodeAt(++t.position)}while(mr(o));if(35===o)do{o=t.input.charCodeAt(++t.position)}while(!yr(o)&&0!==o)}for(;0!==o;){for(Tr(t),t.lineIndent=0,o=t.input.charCodeAt(t.position);(!u||t.lineIndent<l)&&32===o;)t.lineIndent++,o=t.input.charCodeAt(++t.position);if(!u&&t.lineIndent>l&&(l=t.lineIndent),yr(o))f++;else{if(t.lineIndent<l){c===sr?t.result+=bn.repeat("\n",s?1+f:f):c===ar&&s&&(t.result+="\n");break}for(r?mr(o)?(p=!0,t.result+=bn.repeat("\n",s?1+f:f)):p?(p=!1,t.result+=bn.repeat("\n",f+1)):0===f?s&&(t.result+=" "):t.result+=bn.repeat("\n",f):t.result+=bn.repeat("\n",s?1+f:f),s=!0,u=!0,f=0,n=t.position;!yr(o)&&0!==o;)o=t.input.charCodeAt(++t.position);Fr(t,n,t.position,!1)}}return!0}(t,p)||function(t,e){var n,r,i;if(39!==(n=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;0!==(n=t.input.charCodeAt(t.position));)if(39===n){if(Fr(t,r,t.position,!0),39!==(n=t.input.charCodeAt(++t.position)))return!0;r=t.position,t.position++,i=t.position}else yr(n)?(Fr(t,r,i,!0),Dr(t,Lr(t,!1,e)),r=i=t.position):t.position===t.lineStart&&Pr(t)?Er(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Er(t,"unexpected end of the stream within a single quoted scalar")}(t,p)||function(t,e){var n,r,i,o,a,c,s;if(34!==(c=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;0!==(c=t.input.charCodeAt(t.position));){if(34===c)return Fr(t,n,t.position,!0),t.position++,!0;if(92===c){if(Fr(t,n,t.position,!0),yr(c=t.input.charCodeAt(++t.position)))Lr(t,!1,e);else if(c<256&&kr[c])t.result+=_r[c],t.position++;else if((a=120===(s=c)?2:117===s?4:85===s?8:0)>0){for(i=a,o=0;i>0;i--)(a=br(c=t.input.charCodeAt(++t.position)))>=0?o=(o<<4)+a:Er(t,"expected hexadecimal character");t.result+=Sr(o),t.position++}else Er(t,"unknown escape sequence");n=r=t.position}else yr(c)?(Fr(t,n,r,!0),Dr(t,Lr(t,!1,e)),n=r=t.position):t.position===t.lineStart&&Pr(t)?Er(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}Er(t,"unexpected end of the stream within a double quoted scalar")}(t,p)?m=!0:!function(t){var e,n,r;if(42!==(r=t.input.charCodeAt(t.position)))return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;0!==r&&!gr(r)&&!vr(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Er(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),er.call(t.anchorMap,n)||Er(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],Lr(t,!0,-1),!0}(t)?function(t,e,n){var r,i,o,a,c,s,u,l,f=t.kind,p=t.result;if(gr(l=t.input.charCodeAt(t.position))||vr(l)||35===l||38===l||42===l||33===l||124===l||62===l||39===l||34===l||37===l||64===l||96===l)return!1;if((63===l||45===l)&&(gr(r=t.input.charCodeAt(t.position+1))||n&&vr(r)))return!1;for(t.kind="scalar",t.result="",i=o=t.position,a=!1;0!==l;){if(58===l){if(gr(r=t.input.charCodeAt(t.position+1))||n&&vr(r))break}else if(35===l){if(gr(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&Pr(t)||n&&vr(l))break;if(yr(l)){if(c=t.line,s=t.lineStart,u=t.lineIndent,Lr(t,!1,-1),t.lineIndent>=e){a=!0,l=t.input.charCodeAt(t.position);continue}t.position=o,t.line=c,t.lineStart=s,t.lineIndent=u;break}}a&&(Fr(t,i,o,!1),Dr(t,t.line-c),i=o=t.position,a=!1),mr(l)||(o=t.position+1),l=t.input.charCodeAt(++t.position)}return Fr(t,i,o,!1),!!t.result||(t.kind=f,t.result=p,!1)}(t,p,nr===n)&&(m=!0,null===t.tag&&(t.tag="?")):(m=!0,null===t.tag&&null===t.anchor||Er(t,"alias node should not have any properties")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===h&&(m=c&&Mr(t,d))),null===t.tag)null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);else if("?"===t.tag){for(null!==t.result&&"scalar"!==t.kind&&Er(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),s=0,u=t.implicitTypes.length;s<u;s+=1)if((f=t.implicitTypes[s]).resolve(t.result)){t.result=f.construct(t.result),t.tag=f.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else if("!"!==t.tag){if(er.call(t.typeMap[t.kind||"fallback"],t.tag))f=t.typeMap[t.kind||"fallback"][t.tag];else for(f=null,s=0,u=(l=t.typeMap.multi[t.kind||"fallback"]).length;s<u;s+=1)if(t.tag.slice(0,l[s].tag.length)===l[s].tag){f=l[s];break}f||Er(t,"unknown tag !<"+t.tag+">"),null!==t.result&&f.kind!==t.kind&&Er(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+f.kind+'", not "'+t.kind+'"'),f.resolve(t.result,t.tag)?(t.result=f.construct(t.result,t.tag),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):Er(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||m}function Br(t){var e,n,r,i,o=t.position,a=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);0!==(i=t.input.charCodeAt(t.position))&&(Lr(t,!0,-1),i=t.input.charCodeAt(t.position),!(t.lineIndent>0||37!==i));){for(a=!0,i=t.input.charCodeAt(++t.position),e=t.position;0!==i&&!gr(i);)i=t.input.charCodeAt(++t.position);for(r=[],(n=t.input.slice(e,t.position)).length<1&&Er(t,"directive name must not be less than one character in length");0!==i;){for(;mr(i);)i=t.input.charCodeAt(++t.position);if(35===i){do{i=t.input.charCodeAt(++t.position)}while(0!==i&&!yr(i));break}if(yr(i))break;for(e=t.position;0!==i&&!gr(i);)i=t.input.charCodeAt(++t.position);r.push(t.input.slice(e,t.position))}0!==i&&Tr(t),er.call(Cr,n)?Cr[n](t,n,r):xr(t,'unknown document directive "'+n+'"')}Lr(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,Lr(t,!0,-1)):a&&Er(t,"directives end mark is expected"),Ur(t,t.lineIndent-1,or,!1,!0),Lr(t,!0,-1),t.checkLineBreaks&&lr.test(t.input.slice(o,t.position))&&xr(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Pr(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,Lr(t,!0,-1)):t.position<t.length-1&&Er(t,"end of the stream or a document separator is expected")}function Wr(t,e){e=e||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var n=new jr(t,e),r=t.indexOf("\0");for(-1!==r&&(n.position=r,Er(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)Br(n);return n.documents}var Yr=function(t,e,n){null!==e&&"object"==typeof e&&void 0===n&&(n=e,e=null);var r=Wr(t,n);if("function"!=typeof e)return r;for(var i=0,o=r.length;i<o;i+=1)e(r[i])},zr={loadAll:Yr,load:function(t,e){var n=Wr(t,e);if(0!==n.length){if(1===n.length)return n[0];throw new kn("expected a single document in the stream, but found more")}}},qr=Object.prototype.toString,Jr=Object.prototype.hasOwnProperty,Kr=65279,Gr=9,Vr=10,Qr=13,Zr=32,Xr=33,Hr=34,ti=35,ei=37,ni=38,ri=39,ii=42,oi=44,ai=45,ci=58,si=61,ui=62,li=63,fi=64,pi=91,di=93,hi=96,yi=123,mi=124,gi=125,vi={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},bi=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],wi=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Si(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else{if(!(t<=4294967295))throw new kn("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+bn.repeat("0",r-e.length)+e}var ki=1,_i=2;function Oi(t){this.schema=t.schema||tr,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=bn.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=function(t,e){var n,r,i,o,a,c,s;if(null===e)return{};for(n={},i=0,o=(r=Object.keys(e)).length;i<o;i+=1)a=r[i],c=String(e[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(s=t.compiledTypeMap.fallback[a])&&Jr.call(s.styleAliases,c)&&(c=s.styleAliases[c]),n[a]=c;return n}(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType='"'===t.quotingType?_i:ki,this.forceQuotes=t.forceQuotes||!1,this.replacer="function"==typeof t.replacer?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ji(t,e){for(var n,r=bn.repeat(" ",e),i=0,o=-1,a="",c=t.length;i<c;)-1===(o=t.indexOf("\n",i))?(n=t.slice(i),i=c):(n=t.slice(i,o+1),i=o+1),n.length&&"\n"!==n&&(a+=r),a+=n;return a}function Ai(t,e){return"\n"+bn.repeat(" ",t.indent*e)}function Ei(t){return t===Zr||t===Gr}function xi(t){return 32<=t&&t<=126||161<=t&&t<=55295&&8232!==t&&8233!==t||57344<=t&&t<=65533&&t!==Kr||65536<=t&&t<=1114111}function Ci(t){return xi(t)&&t!==Kr&&t!==Qr&&t!==Vr}function Fi(t,e,n){var r=Ci(t),i=r&&!Ei(t);return(n?r:r&&t!==oi&&t!==pi&&t!==di&&t!==yi&&t!==gi)&&t!==ti&&!(e===ci&&!i)||Ci(e)&&!Ei(e)&&t===ti||e===ci&&i}function Ii(t,e){var n,r=t.charCodeAt(e);return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1))>=56320&&n<=57343?1024*(r-55296)+n-56320+65536:r}function Ni(t){return/^\n* /.test(t)}var Ti=1,Li=2,Pi=3,Di=4,Mi=5;function $i(t,e,n,r,i,o,a,c){var s,u,l=0,f=null,p=!1,d=!1,h=-1!==r,y=-1,m=xi(u=Ii(t,0))&&u!==Kr&&!Ei(u)&&u!==ai&&u!==li&&u!==ci&&u!==oi&&u!==pi&&u!==di&&u!==yi&&u!==gi&&u!==ti&&u!==ni&&u!==ii&&u!==Xr&&u!==mi&&u!==si&&u!==ui&&u!==ri&&u!==Hr&&u!==ei&&u!==fi&&u!==hi&&function(t){return!Ei(t)&&t!==ci}(Ii(t,t.length-1));if(e||a)for(s=0;s<t.length;l>=65536?s+=2:s++){if(!xi(l=Ii(t,s)))return Mi;m=m&&Fi(l,f,c),f=l}else{for(s=0;s<t.length;l>=65536?s+=2:s++){if((l=Ii(t,s))===Vr)p=!0,h&&(d=d||s-y-1>r&&" "!==t[y+1],y=s);else if(!xi(l))return Mi;m=m&&Fi(l,f,c),f=l}d=d||h&&s-y-1>r&&" "!==t[y+1]}return p||d?n>9&&Ni(t)?Mi:a?o===_i?Mi:Li:d?Di:Pi:!m||a||i(t)?o===_i?Mi:Li:Ti}function Ri(t,e,n,r,i){t.dump=function(){if(0===e.length)return t.quotingType===_i?'""':"''";if(!t.noCompatMode&&(-1!==bi.indexOf(e)||wi.test(e)))return t.quotingType===_i?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,n),a=-1===t.lineWidth?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),c=r||t.flowLevel>-1&&n>=t.flowLevel;switch($i(e,c,t.indent,a,(function(e){return function(t,e){var n,r;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(t.implicitTypes[n].resolve(e))return!0;return!1}(t,e)}),t.quotingType,t.forceQuotes&&!r,i)){case Ti:return e;case Li:return"'"+e.replace(/'/g,"''")+"'";case Pi:return"|"+Ui(e,t.indent)+Bi(ji(e,o));case Di:return">"+Ui(e,t.indent)+Bi(ji(function(t,e){var n,r,i=/(\n+)([^\n]*)/g,o=(c=t.indexOf("\n"),c=-1!==c?c:t.length,i.lastIndex=c,Wi(t.slice(0,c),e)),a="\n"===t[0]||" "===t[0];var c;for(;r=i.exec(t);){var s=r[1],u=r[2];n=" "===u[0],o+=s+(a||n||""===u?"":"\n")+Wi(u,e),a=n}return o}(e,a),o));case Mi:return'"'+function(t){for(var e,n="",r=0,i=0;i<t.length;r>=65536?i+=2:i++)r=Ii(t,i),!(e=vi[r])&&xi(r)?(n+=t[i],r>=65536&&(n+=t[i+1])):n+=e||Si(r);return n}(e)+'"';default:throw new kn("impossible error: invalid scalar style")}}()}function Ui(t,e){var n=Ni(t)?String(e):"",r="\n"===t[t.length-1];return n+(r&&("\n"===t[t.length-2]||"\n"===t)?"+":r?"":"-")+"\n"}function Bi(t){return"\n"===t[t.length-1]?t.slice(0,-1):t}function Wi(t,e){if(""===t||" "===t[0])return t;for(var n,r,i=/ [^ ]/g,o=0,a=0,c=0,s="";n=i.exec(t);)(c=n.index)-o>e&&(r=a>o?a:c,s+="\n"+t.slice(o,r),o=r+1),a=c;return s+="\n",t.length-o>e&&a>o?s+=t.slice(o,a)+"\n"+t.slice(a+1):s+=t.slice(o),s.slice(1)}function Yi(t,e,n,r){var i,o,a,c="",s=t.tag;for(i=0,o=n.length;i<o;i+=1)a=n[i],t.replacer&&(a=t.replacer.call(n,String(i),a)),(qi(t,e+1,a,!0,!0,!1,!0)||void 0===a&&qi(t,e+1,null,!0,!0,!1,!0))&&(r&&""===c||(c+=Ai(t,e)),t.dump&&Vr===t.dump.charCodeAt(0)?c+="-":c+="- ",c+=t.dump);t.tag=s,t.dump=c||"[]"}function zi(t,e,n){var r,i,o,a,c,s;for(o=0,a=(i=n?t.explicitTypes:t.implicitTypes).length;o<a;o+=1)if(((c=i[o]).instanceOf||c.predicate)&&(!c.instanceOf||"object"==typeof e&&e instanceof c.instanceOf)&&(!c.predicate||c.predicate(e))){if(n?c.multi&&c.representName?t.tag=c.representName(e):t.tag=c.tag:t.tag="?",c.represent){if(s=t.styleMap[c.tag]||c.defaultStyle,"[object Function]"===qr.call(c.represent))r=c.represent(e,s);else{if(!Jr.call(c.represent,s))throw new kn("!<"+c.tag+'> tag resolver accepts not "'+s+'" style');r=c.represent[s](e,s)}t.dump=r}return!0}return!1}function qi(t,e,n,r,i,o,a){t.tag=null,t.dump=n,zi(t,n,!1)||zi(t,n,!0);var c,s=qr.call(t.dump),u=r;r&&(r=t.flowLevel<0||t.flowLevel>e);var l,f,p="[object Object]"===s||"[object Array]"===s;if(p&&(f=-1!==(l=t.duplicates.indexOf(n))),(null!==t.tag&&"?"!==t.tag||f||2!==t.indent&&e>0)&&(i=!1),f&&t.usedDuplicates[l])t.dump="*ref_"+l;else{if(p&&f&&!t.usedDuplicates[l]&&(t.usedDuplicates[l]=!0),"[object Object]"===s)r&&0!==Object.keys(t.dump).length?(!function(t,e,n,r){var i,o,a,c,s,u,l="",f=t.tag,p=Object.keys(n);if(!0===t.sortKeys)p.sort();else if("function"==typeof t.sortKeys)p.sort(t.sortKeys);else if(t.sortKeys)throw new kn("sortKeys must be a boolean or a function");for(i=0,o=p.length;i<o;i+=1)u="",r&&""===l||(u+=Ai(t,e)),c=n[a=p[i]],t.replacer&&(c=t.replacer.call(n,a,c)),qi(t,e+1,a,!0,!0,!0)&&((s=null!==t.tag&&"?"!==t.tag||t.dump&&t.dump.length>1024)&&(t.dump&&Vr===t.dump.charCodeAt(0)?u+="?":u+="? "),u+=t.dump,s&&(u+=Ai(t,e)),qi(t,e+1,c,!0,s)&&(t.dump&&Vr===t.dump.charCodeAt(0)?u+=":":u+=": ",l+=u+=t.dump));t.tag=f,t.dump=l||"{}"}(t,e,t.dump,i),f&&(t.dump="&ref_"+l+t.dump)):(!function(t,e,n){var r,i,o,a,c,s="",u=t.tag,l=Object.keys(n);for(r=0,i=l.length;r<i;r+=1)c="",""!==s&&(c+=", "),t.condenseFlow&&(c+='"'),a=n[o=l[r]],t.replacer&&(a=t.replacer.call(n,o,a)),qi(t,e,o,!1,!1)&&(t.dump.length>1024&&(c+="? "),c+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),qi(t,e,a,!1,!1)&&(s+=c+=t.dump));t.tag=u,t.dump="{"+s+"}"}(t,e,t.dump),f&&(t.dump="&ref_"+l+" "+t.dump));else if("[object Array]"===s)r&&0!==t.dump.length?(t.noArrayIndent&&!a&&e>0?Yi(t,e-1,t.dump,i):Yi(t,e,t.dump,i),f&&(t.dump="&ref_"+l+t.dump)):(!function(t,e,n){var r,i,o,a="",c=t.tag;for(r=0,i=n.length;r<i;r+=1)o=n[r],t.replacer&&(o=t.replacer.call(n,String(r),o)),(qi(t,e,o,!1,!1)||void 0===o&&qi(t,e,null,!1,!1))&&(""!==a&&(a+=","+(t.condenseFlow?"":" ")),a+=t.dump);t.tag=c,t.dump="["+a+"]"}(t,e,t.dump),f&&(t.dump="&ref_"+l+" "+t.dump));else{if("[object String]"!==s){if("[object Undefined]"===s)return!1;if(t.skipInvalid)return!1;throw new kn("unacceptable kind of an object to dump "+s)}"?"!==t.tag&&Ri(t,t.dump,e,o,u)}null!==t.tag&&"?"!==t.tag&&(c=encodeURI("!"===t.tag[0]?t.tag.slice(1):t.tag).replace(/!/g,"%21"),c="!"===t.tag[0]?"!"+c:"tag:yaml.org,2002:"===c.slice(0,18)?"!!"+c.slice(18):"!<"+c+">",t.dump=c+" "+t.dump)}return!0}function Ji(t,e){var n,r,i=[],o=[];for(Ki(t,i,o),n=0,r=o.length;n<r;n+=1)e.duplicates.push(i[o[n]]);e.usedDuplicates=new Array(r)}function Ki(t,e,n){var r,i,o;if(null!==t&&"object"==typeof t)if(-1!==(i=e.indexOf(t)))-1===n.indexOf(i)&&n.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)Ki(t[i],e,n);else for(i=0,o=(r=Object.keys(t)).length;i<o;i+=1)Ki(t[r[i]],e,n)}var Gi=zr.load,Vi={dump:function(t,e){var n=new Oi(e=e||{});n.noRefs||Ji(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),qi(n,0,r,!0,!0)?n.dump+"\n":""}}.dump,Qi="object"==typeof global&&global&&global.Object===Object&&global,Zi="object"==typeof self&&self&&self.Object===Object&&self,Xi=Qi||Zi||Function("return this")(),Hi=Xi.Symbol,to=Object.prototype,eo=to.hasOwnProperty,no=to.toString,ro=Hi?Hi.toStringTag:void 0;var io=Object.prototype.toString;var oo="[object Null]",ao="[object Undefined]",co=Hi?Hi.toStringTag:void 0;function so(t){return null==t?void 0===t?ao:oo:co&&co in Object(t)?function(t){var e=eo.call(t,ro),n=t[ro];try{t[ro]=void 0;var r=!0}catch(t){}var i=no.call(t);return r&&(e?t[ro]=n:delete t[ro]),i}(t):function(t){return io.call(t)}(t)}function uo(t){return null!=t&&"object"==typeof t}var lo=Array.isArray;function fo(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var po="[object AsyncFunction]",ho="[object Function]",yo="[object GeneratorFunction]",mo="[object Proxy]";function go(t){if(!fo(t))return!1;var e=so(t);return e==ho||e==yo||e==po||e==mo}var vo,bo=Xi["__core-js_shared__"],wo=(vo=/[^.]+$/.exec(bo&&bo.keys&&bo.keys.IE_PROTO||""))?"Symbol(src)_1."+vo:"";var So=Function.prototype.toString;function ko(t){if(null!=t){try{return So.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var _o=/^\[object .+?Constructor\]$/,Oo=Function.prototype,jo=Object.prototype,Ao=Oo.toString,Eo=jo.hasOwnProperty,xo=RegExp("^"+Ao.call(Eo).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Co(t){return!(!fo(t)||(e=t,wo&&wo in e))&&(go(t)?xo:_o).test(ko(t));var e}function Fo(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Co(n)?n:void 0}var Io=Fo(Xi,"WeakMap"),No=9007199254740991,To=/^(?:0|[1-9]\d*)$/;function Lo(t,e){var n=typeof t;return!!(e=null==e?No:e)&&("number"==n||"symbol"!=n&&To.test(t))&&t>-1&&t%1==0&&t<e}function Po(t,e){return t===e||t!=t&&e!=e}var Do=9007199254740991;function Mo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Do}function $o(t){return null!=t&&Mo(t.length)&&!go(t)}var Ro=Object.prototype;function Uo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ro)}function Bo(t){return uo(t)&&"[object Arguments]"==so(t)}var Wo=Object.prototype,Yo=Wo.hasOwnProperty,zo=Wo.propertyIsEnumerable,qo=Bo(function(){return arguments}())?Bo:function(t){return uo(t)&&Yo.call(t,"callee")&&!zo.call(t,"callee")};var Jo="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ko=Jo&&"object"==typeof module&&module&&!module.nodeType&&module,Go=Ko&&Ko.exports===Jo?Xi.Buffer:void 0,Vo=(Go?Go.isBuffer:void 0)||function(){return!1},Qo={};Qo["[object Float32Array]"]=Qo["[object Float64Array]"]=Qo["[object Int8Array]"]=Qo["[object Int16Array]"]=Qo["[object Int32Array]"]=Qo["[object Uint8Array]"]=Qo["[object Uint8ClampedArray]"]=Qo["[object Uint16Array]"]=Qo["[object Uint32Array]"]=!0,Qo["[object Arguments]"]=Qo["[object Array]"]=Qo["[object ArrayBuffer]"]=Qo["[object Boolean]"]=Qo["[object DataView]"]=Qo["[object Date]"]=Qo["[object Error]"]=Qo["[object Function]"]=Qo["[object Map]"]=Qo["[object Number]"]=Qo["[object Object]"]=Qo["[object RegExp]"]=Qo["[object Set]"]=Qo["[object String]"]=Qo["[object WeakMap]"]=!1;var Zo,Xo="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ho=Xo&&"object"==typeof module&&module&&!module.nodeType&&module,ta=Ho&&Ho.exports===Xo&&Qi.process,ea=function(){try{var t=Ho&&Ho.require&&Ho.require("util").types;return t||ta&&ta.binding&&ta.binding("util")}catch(t){}}(),na=ea&&ea.isTypedArray,ra=na?(Zo=na,function(t){return Zo(t)}):function(t){return uo(t)&&Mo(t.length)&&!!Qo[so(t)]},ia=Object.prototype.hasOwnProperty;function oa(t,e){var n=lo(t),r=!n&&qo(t),i=!n&&!r&&Vo(t),o=!n&&!r&&!i&&ra(t),a=n||r||i||o,c=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],s=c.length;for(var u in t)!e&&!ia.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Lo(u,s))||c.push(u);return c}var aa=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),ca=Object.prototype.hasOwnProperty;function sa(t){if(!Uo(t))return aa(t);var e=[];for(var n in Object(t))ca.call(t,n)&&"constructor"!=n&&e.push(n);return e}function ua(t){return $o(t)?oa(t):sa(t)}var la=Fo(Object,"create");var fa=Object.prototype.hasOwnProperty;var pa=Object.prototype.hasOwnProperty;function da(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function ha(t,e){for(var n=t.length;n--;)if(Po(t[n][0],e))return n;return-1}da.prototype.clear=function(){this.__data__=la?la(null):{},this.size=0},da.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},da.prototype.get=function(t){var e=this.__data__;if(la){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return fa.call(e,t)?e[t]:void 0},da.prototype.has=function(t){var e=this.__data__;return la?void 0!==e[t]:pa.call(e,t)},da.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=la&&void 0===e?"__lodash_hash_undefined__":e,this};var ya=Array.prototype.splice;function ma(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ma.prototype.clear=function(){this.__data__=[],this.size=0},ma.prototype.delete=function(t){var e=this.__data__,n=ha(e,t);return!(n<0)&&(n==e.length-1?e.pop():ya.call(e,n,1),--this.size,!0)},ma.prototype.get=function(t){var e=this.__data__,n=ha(e,t);return n<0?void 0:e[n][1]},ma.prototype.has=function(t){return ha(this.__data__,t)>-1},ma.prototype.set=function(t,e){var n=this.__data__,r=ha(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var ga=Fo(Xi,"Map");function va(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function ba(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ba.prototype.clear=function(){this.size=0,this.__data__={hash:new da,map:new(ga||ma),string:new da}},ba.prototype.delete=function(t){var e=va(this,t).delete(t);return this.size-=e?1:0,e},ba.prototype.get=function(t){return va(this,t).get(t)},ba.prototype.has=function(t){return va(this,t).has(t)},ba.prototype.set=function(t,e){var n=va(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function wa(t){var e=this.__data__=new ma(t);this.size=e.size}wa.prototype.clear=function(){this.__data__=new ma,this.size=0},wa.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},wa.prototype.get=function(t){return this.__data__.get(t)},wa.prototype.has=function(t){return this.__data__.has(t)},wa.prototype.set=function(t,e){var n=this.__data__;if(n instanceof ma){var r=n.__data__;if(!ga||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ba(r)}return n.set(t,e),this.size=n.size,this};var Sa=Object.prototype.propertyIsEnumerable,ka=Object.getOwnPropertySymbols,_a=ka?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}(ka(t),(function(e){return Sa.call(t,e)})))}:function(){return[]};function Oa(t){return function(t,e,n){var r=e(t);return lo(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,ua,_a)}var ja=Fo(Xi,"DataView"),Aa=Fo(Xi,"Promise"),Ea=Fo(Xi,"Set"),xa="[object Map]",Ca="[object Promise]",Fa="[object Set]",Ia="[object WeakMap]",Na="[object DataView]",Ta=ko(ja),La=ko(ga),Pa=ko(Aa),Da=ko(Ea),Ma=ko(Io),$a=so;(ja&&$a(new ja(new ArrayBuffer(1)))!=Na||ga&&$a(new ga)!=xa||Aa&&$a(Aa.resolve())!=Ca||Ea&&$a(new Ea)!=Fa||Io&&$a(new Io)!=Ia)&&($a=function(t){var e=so(t),n="[object Object]"==e?t.constructor:void 0,r=n?ko(n):"";if(r)switch(r){case Ta:return Na;case La:return xa;case Pa:return Ca;case Da:return Fa;case Ma:return Ia}return e});var Ra=$a,Ua=Xi.Uint8Array;function Ba(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new ba;++e<n;)this.add(t[e])}function Wa(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}Ba.prototype.add=Ba.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Ba.prototype.has=function(t){return this.__data__.has(t)};var Ya=1,za=2;function qa(t,e,n,r,i,o){var a=n&Ya,c=t.length,s=e.length;if(c!=s&&!(a&&s>c))return!1;var u=o.get(t),l=o.get(e);if(u&&l)return u==e&&l==t;var f=-1,p=!0,d=n&za?new Ba:void 0;for(o.set(t,e),o.set(e,t);++f<c;){var h=t[f],y=e[f];if(r)var m=a?r(y,h,f,e,t,o):r(h,y,f,t,e,o);if(void 0!==m){if(m)continue;p=!1;break}if(d){if(!Wa(e,(function(t,e){if(a=e,!d.has(a)&&(h===t||i(h,t,n,r,o)))return d.push(e);var a}))){p=!1;break}}else if(h!==y&&!i(h,y,n,r,o)){p=!1;break}}return o.delete(t),o.delete(e),p}function Ja(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function Ka(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var Ga=1,Va=2,Qa="[object Boolean]",Za="[object Date]",Xa="[object Error]",Ha="[object Map]",tc="[object Number]",ec="[object RegExp]",nc="[object Set]",rc="[object String]",ic="[object Symbol]",oc="[object ArrayBuffer]",ac="[object DataView]",cc=Hi?Hi.prototype:void 0,sc=cc?cc.valueOf:void 0;var uc=1,lc=Object.prototype.hasOwnProperty;var fc=1,pc="[object Arguments]",dc="[object Array]",hc="[object Object]",yc=Object.prototype.hasOwnProperty;function mc(t,e,n,r,i,o){var a=lo(t),c=lo(e),s=a?dc:Ra(t),u=c?dc:Ra(e),l=(s=s==pc?hc:s)==hc,f=(u=u==pc?hc:u)==hc,p=s==u;if(p&&Vo(t)){if(!Vo(e))return!1;a=!0,l=!1}if(p&&!l)return o||(o=new wa),a||ra(t)?qa(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case ac:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case oc:return!(t.byteLength!=e.byteLength||!o(new Ua(t),new Ua(e)));case Qa:case Za:case tc:return Po(+t,+e);case Xa:return t.name==e.name&&t.message==e.message;case ec:case rc:return t==e+"";case Ha:var c=Ja;case nc:var s=r&Ga;if(c||(c=Ka),t.size!=e.size&&!s)return!1;var u=a.get(t);if(u)return u==e;r|=Va,a.set(t,e);var l=qa(c(t),c(e),r,i,o,a);return a.delete(t),l;case ic:if(sc)return sc.call(t)==sc.call(e)}return!1}(t,e,s,n,r,i,o);if(!(n&fc)){var d=l&&yc.call(t,"__wrapped__"),h=f&&yc.call(e,"__wrapped__");if(d||h){var y=d?t.value():t,m=h?e.value():e;return o||(o=new wa),i(y,m,n,r,o)}}return!!p&&(o||(o=new wa),function(t,e,n,r,i,o){var a=n&uc,c=Oa(t),s=c.length;if(s!=Oa(e).length&&!a)return!1;for(var u=s;u--;){var l=c[u];if(!(a?l in e:lc.call(e,l)))return!1}var f=o.get(t),p=o.get(e);if(f&&p)return f==e&&p==t;var d=!0;o.set(t,e),o.set(e,t);for(var h=a;++u<s;){var y=t[l=c[u]],m=e[l];if(r)var g=a?r(m,y,l,e,t,o):r(y,m,l,t,e,o);if(!(void 0===g?y===m||i(y,m,n,r,o):g)){d=!1;break}h||(h="constructor"==l)}if(d&&!h){var v=t.constructor,b=e.constructor;v==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(d=!1)}return o.delete(t),o.delete(e),d}(t,e,n,r,i,o))}function gc(t,e,n,r,i){return t===e||(null==t||null==e||!uo(t)&&!uo(e)?t!=t&&e!=e:mc(t,e,n,r,gc,i))}var vc="[object Map]",bc="[object Set]",wc=Object.prototype.hasOwnProperty;function Sc(t){if(null==t)return!0;if($o(t)&&(lo(t)||"string"==typeof t||"function"==typeof t.splice||Vo(t)||ra(t)||qo(t)))return!t.length;var e=Ra(t);if(e==vc||e==bc)return!t.size;if(Uo(t))return!sa(t).length;for(var n in t)if(wc.call(t,n))return!1;return!0}const kc=process.env.RBAC_CONFIG_PATH||"./config",_c=o.resolve(kc,"permissions"),Oc=o.join(o.resolve(kc),"roles.yaml");async function jc(t,e){const n=await e.readByQuery({filter:{collection:t}}),r=[];n.sort(((t,e)=>t.action.localeCompare(e.action))).forEach((t=>{const{role:e,action:n,permissions:i,validation:o,presets:a,fields:c}=t,s={action:n};Sc(i)||(s.permissions=i),Sc(o)||(s.validation=o),Sc(a)||(s.presets=a),Array.isArray(c)&&c.length&&(c.sort(((t,e)=>t.localeCompare(e))),s.fields=1===c.length?c[0]:c);const u=r.find((t=>gc(t[0],s)));u?u[1].includes(e)||u[1].push(e):r.push([s,[e]])}));const i=r.map((([t,e])=>(t.roles=e,t)));let a=Vi(i,{sortKeys:!0});const c=o.join(_c,`${t}.yaml`);if(a.startsWith("[]")){const e=o.dirname(c);await mn.readdir(e).then((e=>{if(e.find((e=>e===`${t}.yaml`)))return mn.remove(c)})).catch(console.error)}else a=a.replace(/- action/g,"\n- action"),await mn.writeFile(c,a,"utf8").catch(console.error)}async function Ac(t){const e=(await t.readByQuery({limit:-1,fields:["id","name","icon","description","enforce_tfa","external_id","ip_whitelist","app_access","admin_access"]})).map((t=>{const{id:e,name:n,icon:r,...i}=t,o={id:e,name:n,icon:r};return Object.entries(i).forEach((([t,e])=>{e&&(o[t]=e)})),o}));let n=Vi(e,{sortKeys:!1});n.startsWith("[]")?await mn.remove(Oc):(n=n.replace(/- id/g,"\n- id"),await mn.writeFile(Oc,n,"utf8"))}var Ec=({filter:t,action:e,init:n},r)=>{const{services:{CollectionsService:i,PermissionsService:a,RolesService:c},env:s,logger:u}=r,l=async({key:t},{database:e,schema:n})=>{const r=new a({database:e,schema:n}),i=await r.readOne(t,{fields:["id","collection"]});await jc(i.collection,r)},f=async({keys:t},{database:e,schema:n})=>{const r=new a({database:e,schema:n}),i=await r.readMany(t,{fields:["id","collection"]}),o=[...new Set(i.map((t=>t.collection)))];await Promise.all(o.map((t=>jc(t,r))))},p={},d=async(t,e,{database:n,schema:r})=>{const i=new a({database:n,schema:r});(await i.readMany(t,{fields:["id","collection"]})).forEach((({id:t,collection:e})=>{p[t]=e}))},h=async({keys:t},{database:e,schema:n})=>{const r=new a({database:e,schema:n}),i=new Set;t.forEach((t=>i.add(p[t]))),await Promise.all([...i].map((t=>jc(t,r)))),t.forEach((t=>delete p[t]))},y=({keys:t,key:e},{database:n,schema:r})=>Ac(new c({database:n,schema:r}));async function m(){const{getSchema:t,database:e}=r,n=await t(),i=new a({database:e,schema:n}),s=new c({database:e,schema:n});u.info("Importing roles..."),await async function(t){if(!mn.pathExists(Oc))return 0;const e=await mn.readFile(Oc,"utf8"),n=Gi(e).map((t=>{const{id:e,name:n,icon:r,description:i,enforce_tfa:o,external_id:a,ip_whitelist:c,app_access:s,admin_access:u}=t;return{id:e,name:n,icon:null!=r?r:"supervised_user_circle",description:null!=i?i:"",enforce_tfa:null!=o&&o,external_id:null!=a?a:null,ip_whitelist:null!=c?c:[],app_access:null!=s&&s,admin_access:null!=u&&u}}));return await t.upsertMany(n,{emitEvents:!1})}(s),u.info("Importing permissions...");const l=await async function(){const t=await mn.readdir(_c),e=[];return t.forEach((t=>{t.endsWith(".yaml")&&e.push(t.replace(".yaml",""))})),e}();await Promise.all(l.map((t=>async function(t,e){const n=o.join(_c,`${t}.yaml`);if(!mn.pathExists(n))return 0;const r=await mn.readFile(n,"utf8"),i=Gi(r),a=[],c=new Set,s=new Set;i.forEach((e=>{const{action:n,roles:r,permissions:i,validation:o,presets:u,fields:l}=e;if(Sc(r))throw new Error(`Permission block ${t}/${n} is missing roles`);c.add(n),r.forEach((e=>{s.add(e),a.push({role:e,action:n,collection:t,permissions:i||null,validation:o||null,presets:u||null,fields:"string"==typeof l?[l]:null!=l?l:null})}))})),await e.deleteByQuery({filter:{collection:t,role:{_in:[...s].map((t=>null===t?e.knex.raw("NULL"):t))},action:{_nin:[...c]}}},{emitEvents:!1});const u=a.map((async t=>{var n;const{collection:r,action:i,role:o}=t,a=await e.readByQuery({filter:{collection:r,action:i,role:null===o?e.knex.raw("NULL"):o},limit:1,fields:["id"]},{emitEvents:!1});(null==a?void 0:a.length)&&(null==(n=a[0])?void 0:n.id)?await e.updateOne(a[0].id,t,{emitEvents:!1}):await e.createOne(t,{emitEvents:!1})}));await Promise.all(u)}(t,i)))),u.info("RBAC imported!")}["EXPORT","FULL"].includes(s.RBAC_SYNC_MODE)&&(e("roles.create",y),e("roles.update",y),e("roles.delete",y),e("permissions.create",l),e("permissions.update",f),t("permissions.delete",d),e("permissions.delete",h)),["IMPORT","FULL"].includes(s.RBAC_SYNC_MODE)&&setTimeout(m,10),n("cli.before",(async({program:t})=>{const e=t.command("rbac");e.command("import").description("Sync configured roles and permissions from files to database").action((async()=>{if(["IMPORT","FULL"].includes(s.RBAC_SYNC_MODE))u.warn("RBAC Sync is configured to automatically import roles and permissions. Skipping manual import.");else try{await m(),process.exit(0)}catch(t){u.error(t)}process.exit(1)})),e.command("export").description("Sync roles and permissions from DB to file").option("--system","Include system collections").action((async({system:t=!1})=>{const{getSchema:e,database:n}=r;u.info("Exporting RBAC...");try{const r=await e(),o=new i({database:n,schema:r}),s=new a({database:n,schema:r}),l=new c({database:n,schema:r}),f=await o.readByQuery();u.info("Exporting permissions..."),await Promise.all(f.map((({collection:e})=>{if(t||!e.startsWith("directus_"))return jc(e,s)}))),u.info("Exporting roles..."),await Ac(l),u.info("RBAC exported!"),process.exit(0)}catch(t){u.error(t),process.exit(1)}}))}))};export{Ec as default};
